(function(){"use strict";var e={6322:function(e,t,n){var s=n(9242),o=n(3396);function a(e,t,n,s,a,r){const c=(0,o.up)("Navbar"),l=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c),(0,o.Wm)(l)],64)}var r=n(7139);const c={class:"navbar navbar-expand-lg bg-body-tertiary"},l={class:"container"},i=(0,o._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o._)("span",{class:"navbar-toggler-icon"})],-1),u={class:"collapse navbar-collapse",id:"navbarText"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},p={class:"nav-item"},f={class:"nav-item"},m={class:"nav-item"},v={key:0,class:"navbar-nav"},g={class:"nav-item"},w={class:"nav-item"},_={key:1,class:"navbar-nav"},h={class:"nav-item"},b={class:"nav-item"};function y(e,t,n,s,a,y){const x=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.iD)("nav",c,[(0,o._)("div",l,[(0,o.Wm)(x,{class:"navbar-brand",to:{name:"home"}},{default:(0,o.w5)((()=>[(0,o.Uk)("My space")])),_:1}),i,(0,o._)("div",u,[(0,o._)("ul",d,[(0,o._)("li",p,[(0,o.Wm)(x,{class:"nav-link","aria-current":"page",to:{name:"userProf",params:{userId:e.$store.state.User.userId}}},{default:(0,o.w5)((()=>[(0,o.Uk)("我的空间")])),_:1},8,["to"])]),(0,o._)("li",f,[(0,o.Wm)(x,{class:"nav-link",to:{name:"friendsList"}},{default:(0,o.w5)((()=>[(0,o.Uk)("好友动态")])),_:1})]),(0,o._)("li",m,[(0,o.Wm)(x,{class:"nav-link",to:{name:"home"}},{default:(0,o.w5)((()=>[(0,o.Uk)("好友列表")])),_:1})])]),e.$store.state.User.isLogin?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("ul",v,[(0,o._)("li",g,[(0,o.Wm)(x,{class:"nav-link",to:{name:"login"}},{default:(0,o.w5)((()=>[(0,o.Uk)("登录")])),_:1})]),(0,o._)("li",w,[(0,o.Wm)(x,{class:"nav-link",to:{name:"home"}},{default:(0,o.w5)((()=>[(0,o.Uk)("注册")])),_:1})])])),e.$store.state.User.isLogin?((0,o.wg)(),(0,o.iD)("ul",_,[(0,o._)("li",h,[(0,o.Wm)(x,{class:"nav-link",to:{name:"home"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.$store.state.User.username),1)])),_:1})]),(0,o._)("li",b,[(0,o._)("a",{class:"nav-link",onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t)),style:{cursor:"pointer"}},"退出")])])):(0,o.kq)("",!0)])])])}var x=n(65),k={name:"Navbar",components:{},setup:()=>{const e=(0,x.oR)(),t=()=>{e.commit("logout")};return{logout:t}}},P=n(89);const I=(0,P.Z)(k,[["render",y]]);var j=I,C=n(7387),U=n.n(C),D={name:"AppRoot",components:{Navbar:j},setup:()=>{U().ajax({type:"get",url:"http://192.168.0.104:3000/GetInfo/All",success:function(e){console.log(e)}})}};const H=(0,P.Z)(D,[["render",a]]);var L=H,O=n(1598);const T={state:{username:"",userId:0,followsCount:0,refresh:"",access:"",isLogin:!1,photo:""},mutations:{update:(e,t)=>{e.userId=t.userId,e.isLogin=t.isLogin,e.followsCount=t.followsCount,e.refresh=t.refresh,e.access=t.access,e.photo=t.photo,e.username=t.username,console.log("ok!!!")},updateAccess:(e,t)=>{e.access=t,console.log(t)},logout:e=>{e.userId=0,e.isLogin=!1,e.followsCount=0,e.refresh="",e.access="",e.photo="",e.username=""}},actions:{login:(e,t)=>{U().ajax({type:"post",url:"https://app165.acapp.acwing.com.cn/api/token/",data:{username:t.username,password:t.password},success:function(n){const{access:s,refresh:o}=n,a=(0,O.Z)(s);e.dispatch("GetUserInfo",{user_id:a.user_id,access:s,success:n=>{e.commit("update",{username:n.username,userId:a.user_id,followsCount:n.followerCount,refresh:o,access:s,isLogin:!0,photo:n.photo});var r=setInterval((()=>{e.state.isLogin?e.dispatch("Refresh"):clearInterval(r)}),27e4);t.success()},error:()=>{t.error()}})},error:function(){t.error()}})},Refresh:e=>{const t=e.state.refresh;U().ajax({type:"post",url:"https://app165.acapp.acwing.com.cn/api/token/refresh/",data:{refresh:t},success:function(t){e.commit("updateAccess",t.access)}})},GetUserInfo:(e,t)=>{U().ajax({type:"get",url:"https://app165.acapp.acwing.com.cn/myspace/getinfo/",data:{user_id:t.user_id},headers:{Authorization:"Bearer "+t.access},success:function(e){t.success(e)},error:function(){t.error()}})}}};var W=T,Z=(0,x.MT)({state:{},getters:{},mutations:{},actions:{},modules:{User:W}}),N=n(2483);const z={class:"card-body"},A=["src"];function R(e,t,n,s,a,c){const l=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(l,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.info,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:"card"},[(0,o._)("div",z,[(0,o._)("img",{src:e.photo,alt:"",srcset:""},null,8,A),(0,o.Uk)(" "+(0,r.zw)(e.username),1)])])))),128))])),_:1})}const S={class:"container Cont"},q={class:"card"},M={class:"card-body"};function V(e,t,n,s,a,r){return(0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("div",q,[(0,o._)("div",M,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])])}var Y={name:"container"};const $=(0,P.Z)(Y,[["render",V],["__scopeId","data-v-382a0172"]]);var B=$,G=n(4870),K={name:"HomeView",components:{container:B},setup:()=>{let e=(0,G.iH)([]);return U().ajax({type:"get",url:"https://app165.acapp.acwing.com.cn/myspace/userlist/",dataType:"Json",success:function(t){console.log(t),e.value=t}}),{info:e}}};const E=(0,P.Z)(K,[["render",R]]);var F=E;const J=e=>((0,o.dD)("data-v-34438f77"),e=e(),(0,o.Cn)(),e),Q=J((()=>(0,o._)("h1",null,"oh!, 404 —— Not find!!!",-1)));function X(e,t,n,s,a,r){const c=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[Q])),_:1})}var ee={name:"No_find",components:{container:B}};const te=(0,P.Z)(ee,[["render",X],["__scopeId","data-v-34438f77"]]);var ne=te;function se(e,t,n,s,a,r){const c=(0,o.up)("listPlay"),l=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{Post:e.Post,onPostnew:e.postnew},null,8,["Post","onPostnew"])])),_:1})}n(541);const oe=e=>((0,o.dD)("data-v-8736553a"),e=e(),(0,o.Cn)(),e),ae={class:"container text-center"},re={class:"row"},ce={class:"col-3"},le=oe((()=>(0,o._)("div",{class:"Head001"},"用户信息",-1))),ie={class:"card cb"},ue={class:"card-body"},de={class:"form-floating"},pe=oe((()=>(0,o._)("label",{for:"floatingTextarea2"},"分享现在",-1))),fe={class:"col-9"},me=oe((()=>(0,o._)("div",{class:"Head001"},"用户动态",-1))),ve={class:"card cb"},ge={class:"card-body"};function we(e,t,n,a,c,l){return(0,o.wg)(),(0,o.iD)("div",ae,[(0,o._)("div",re,[(0,o._)("div",ce,[le,(0,o._)("div",null,[(0,o._)("div",ie,[(0,o._)("div",ue,[(0,o._)("div",de,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.intext=t),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[s.nr,e.intext]]),pe]),(0,o._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.postnew&&e.postnew(...t)),class:"btn btn-primary btn-sm btn-sub"},"发帖")])])])]),(0,o._)("div",fe,[me,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.Post.body,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[(0,o._)("div",ve,[(0,o._)("div",ge,(0,r.zw)(e.text),1)])])))),128))])])])}var _e={name:"listPlay",components:{},props:{Post:{type:Object,default:()=>{}}},setup:(e,t)=>{let n=(0,G.iH)("");const s=()=>{t.emit("postnew",n.value),n.value=""};return{intext:n,postnew:s}}};const he=(0,P.Z)(_e,[["render",we],["__scopeId","data-v-8736553a"]]);var be=he,ye={name:"friendsList",components:{container:B,listPlay:be},setup:()=>{const e=(0,G.qj)({Count:2,body:[{id:1,text:"aaaaaa"},{id:2,text:"bbbbb"}]}),t=t=>{e.Count++,e.body.unshift({id:e.Count,text:t})};return{Post:e,postnew:t}}};const xe=(0,P.Z)(ye,[["render",se]]);var ke=xe;const Pe=e=>((0,o.dD)("data-v-79accc44"),e=e(),(0,o.Cn)(),e),Ie={class:"row justify-content-md-center"},je={class:"col-3"},Ce={class:"form-floating mb-3"},Ue=Pe((()=>(0,o._)("label",{for:"floatingInput"},"用户名",-1))),De={class:"form-floating"},He=Pe((()=>(0,o._)("label",{for:"floatingPassword"},"密码",-1))),Le={key:0},Oe=Pe((()=>(0,o._)("span",null,"用户名或者密码错误",-1))),Te=[Oe];function We(e,t,n,a,r,c){const l=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(l,null,{default:(0,o.w5)((()=>[(0,o._)("div",Ie,[(0,o._)("div",je,[(0,o._)("div",Ce,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),type:"text",class:"form-control",id:"floatingInput",placeholder:"用户名"},null,512),[[s.nr,e.username]]),Ue]),(0,o._)("div",De,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),type:"password",class:"form-control",id:"floatingPassword",placeholder:"密码"},null,512),[[s.nr,e.password]]),He]),e.loginfail?((0,o.wg)(),(0,o.iD)("div",Le,Te)):(0,o.kq)("",!0),(0,o._)("button",{onClick:t[2]||(t[2]=(...t)=>e.login&&e.login(...t)),type:"button",class:"btn btn-primary btn-login"},"登录")])])])),_:1})}var Ze={name:"login",components:{container:B},setup:()=>{let e=(0,G.iH)(""),t=(0,G.iH)(""),n=(0,G.iH)(!1);const s=(0,x.oR)(),o=()=>{const o=t.value;t.value="",s.dispatch("login",{username:e.value,password:o,success:()=>{console.log("success"),n.value=!1,bt.back()},error:()=>{console.log("error"),n.value=!0}})};return{username:e,password:t,login:o,loginfail:n}}};const Ne=(0,P.Z)(Ze,[["render",We],["__scopeId","data-v-79accc44"]]);var ze=Ne;const Ae=e=>((0,o.dD)("data-v-29277d2f"),e=e(),(0,o.Cn)(),e),Re={class:"row text-center"},Se={class:"col-3"},qe=Ae((()=>(0,o._)("div",{class:"Head001"},"用户信息",-1))),Me={class:"col-9"},Ve=Ae((()=>(0,o._)("div",{class:"Head001"},"用户动态",-1)));function Ye(e,t,n,s,a,r){const c=(0,o.up)("idcard"),l=(0,o.up)("sendsmg"),i=(0,o.up)("newsList"),u=(0,o.up)("container");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",Re,[(0,o._)("div",Se,[qe,(0,o.Wm)(c,{userid:e.NowId,style:{"margin-top":"10px"}},null,8,["userid"]),(0,o.Wm)(l,{onNewpost:e.newpost},null,8,["onNewpost"])]),(0,o._)("div",Me,[Ve,(0,o.Wm)(i,{Post:e.Post},null,8,["Post"])])])])),_:1})}n(7658);const $e={class:"card"},Be={class:"card-body"},Ge={class:"row"},Ke={class:"col-5"},Ee=["src"],Fe={class:"col-7"},Je={class:"Name"},Qe={class:"follow"};function Xe(e,t,n,s,a,c){return(0,o.wg)(),(0,o.iD)("div",$e,[(0,o._)("div",Be,[(0,o._)("div",Ge,[(0,o._)("div",Ke,[(0,o._)("img",{src:e.photourl,alt:"",class:"img-fluid rop"},null,8,Ee)]),(0,o._)("div",Fe,[(0,o._)("p",Je,(0,r.zw)(e.name),1),(0,o._)("p",Qe,"粉丝： "+(0,r.zw)(e.followerCount),1)])])])])}var et={name:"idcard",props:{userid:{type:Number}},setup:(e,t)=>{const n=Z.state.User.access;console.log(e);let s=(0,G.iH)(""),o=(0,G.iH)(""),a=(0,G.iH)(0);return U().ajax({type:"get",url:"https://app165.acapp.acwing.com.cn/myspace/getinfo/",data:{user_id:e.userid},headers:{Authorization:"Bearer "+n},success:function(e){s.value=e.username,o.value=e.photo,a.value=e.followerCount}}),{name:s,photourl:o,followerCount:a}}};const tt=(0,P.Z)(et,[["render",Xe],["__scopeId","data-v-57504d8c"]]);var nt=tt;const st=e=>((0,o.dD)("data-v-6ffd7f00"),e=e(),(0,o.Cn)(),e),ot={class:"form-floating cb"},at=st((()=>(0,o._)("label",{for:"floatingTextarea2"},"分享现在",-1)));function rt(e,t,n,a,r,c){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",ot,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.intext=t),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[s.nr,e.intext]]),at]),(0,o._)("button",{type:"button",class:"btn btn-primary btn-sm btn-sub",onClick:t[1]||(t[1]=(...t)=>e.newpost&&e.newpost(...t))},"发帖")],64)}var ct={name:"sendsmg",setup:(e,t)=>{let n=(0,G.iH)("");const s=()=>{""!=n.value&&(t.emit("newpost",n.value),n.value="")};return{intext:n,newpost:s}}};const lt=(0,P.Z)(ct,[["render",rt],["__scopeId","data-v-6ffd7f00"]]);var it=lt;const ut={class:"card-body"};function dt(e,t,n,s,a,c){return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.Post.posts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"card smg",key:e.id},[(0,o._)("div",ut,(0,r.zw)(e.content),1)])))),128)}var pt={name:"newsList",props:{Post:{type:Object,default:()=>{}}},setup:e=>{}};const ft=(0,P.Z)(pt,[["render",dt],["__scopeId","data-v-9ce43d9e"]]);var mt=ft,vt={name:"userProf",components:{container:B,idcard:nt,sendsmg:it,newsList:mt},setup:()=>{const e=(0,N.yj)(),t=(0,x.oR)();let n=e.params.userId;0==n&&(n=t.state.User.userId);const s=t.state.User.access;let o=(0,G.qj)({Count:0,posts:[]});console.log(n),t.state.User.isLogin?U().ajax({type:"get",url:"https://app165.acapp.acwing.com.cn/myspace/post/",data:{user_id:n},headers:{Authorization:"Bearer "+s},success:function(e){console.log(e),o.posts=e}}):bt.push({name:"login"});const a=e=>{U().ajax({type:"POST",url:"https://app165.acapp.acwing.com.cn/myspace/post/",data:{content:e},headers:{Authorization:"Bearer "+s},success:function(e){console.log(e)}}),o.Count++,o.posts.unshift({id:o.Count,content:e})};return{NowId:n,Post:o,newpost:a}}};const gt=(0,P.Z)(vt,[["render",Ye],["__scopeId","data-v-29277d2f"]]);var wt=gt;const _t=[{path:"/index.html",name:"home",component:F},{path:"/index.html/userProf/:userId",name:"userProf",component:wt},{path:"/index.html/friendsList",name:"friendsList",component:ke},{path:"/index.html/login",name:"login",component:ze},{path:"/index.html/404",name:"notfind",component:ne},{path:"/index.html/:path(.*)",redirect:"/index.html/404"}],ht=(0,N.p7)({history:(0,N.PO)(),routes:_t});var bt=ht;n(7154),n(4012);(0,s.ri)(L).use(bt).use(Z).use(Z).mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,a){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],a=e[u][2];for(var c=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(c=!1,a<r&&(r=a));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,r=s[0],c=s[1],l=s[2],i=0;if(r.some((function(t){return 0!==e[t]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(s);i<r.length;i++)a=r[i],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},s=self["webpackChunkvue1"]=self["webpackChunkvue1"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(6322)}));s=n.O(s)})();
//# sourceMappingURL=app.e74966c3.js.map